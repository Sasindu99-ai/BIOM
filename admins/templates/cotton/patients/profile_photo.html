<c-vars photo_url="" />

<div class="profile-photo-section">
    <!-- Photo Preview with Progress Ring -->
    <div class="photo-preview-wrapper">
        <!-- SVG Progress Ring -->
        <svg id="uploadProgressCircle" class="upload-progress-ring" style="display: none;">
            <circle id="uploadProgressRing" cx="90" cy="90" r="88" fill="none" stroke="#60a5fa" stroke-width="6"
                stroke-dasharray="552.92" stroke-dashoffset="552.92" transform="rotate(-90 90 90)" />
        </svg>

        <img src="{{ photo_url|default:'/static/img/default-avatar.png' }}" alt="Patient photo" id="photoPreview"
            class="profile-photo">
        <div class="photo-overlay">
            <i class="bi bi-camera-fill"></i>
            <span class="small">Click or drag to upload</span>
        </div>
    </div>

    <!-- Hidden File Input -->
    <input type="file" id="profilePhotoInput" accept="image/*" class="d-none">

    <!-- Action Buttons -->
    <div class="photo-actions mt-3">
        <button type="button" class="btn btn-outline-primary btn-sm" id="uploadPhotoBtn">
            <i class="bi bi-upload me-1"></i> Choose Photo
        </button>
        <button type="button" class="btn btn-outline-danger btn-sm" id="removePhotoBtn" style="display: none;">
            <i class="bi bi-trash me-1"></i> Remove
        </button>
    </div>

    <!-- Info Text -->
    <p class="text-muted small mt-2 mb-0">
        <i class="bi bi-info-circle me-1"></i>
        Optional. Max 5MB. JPG, PNG, or GIF.
    </p>
</div>